<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Classifica - Santacruz Cup</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
    <h1>Santacruz Cup</h1>
    <nav>
        <a href="index.html">Home</a>
        <a href="calendario.html">Calendario</a>
        <a href="risultati.html">Risultati</a>
        <a href="classifica.html">Classifica</a>
        <a href="marcatori.html">Marcatori</a>
        <a href="squadre.html">Squadre</a>
        <a href="regolamento.html">Regolamento</a>
    </nav>
</header>

<section>
    <h2>üèÜ Classifica</h2>

    <table id="tabellaClassifica">
        <tr>
            <th>Posizione</th>
            <th>Squadra</th>
            <th>Punti</th>
            <th>Vittorie</th>
            <th>Pareggi</th>
            <th>Sconfitte</th>
        </tr>
    </table>
</section>

<script>
const squadre = [
    "Team A",
    "Team B",
    "Team C",
    "Team D",
    "Team E"
];

function calcolaClassifica() {

    let risultati = JSON.parse(localStorage.getItem("risultati")) || [];

    let classifica = {};

    squadre.forEach(nome => {
        classifica[nome] = {
            punti: 0,
            vittorie: 0,
            pareggi: 0,
            sconfitte: 0
        };
    });

    risultati.forEach(partita => {

        let s1 = partita.squadra1;
        let s2 = partita.squadra2;
        let g1 = partita.gol1;
        let g2 = partita.gol2;

        if (g1 > g2) {
            classifica[s1].punti += 3;
            classifica[s1].vittorie += 1;
            classifica[s2].sconfitte += 1;
        } 
        else if (g2 > g1) {
            classifica[s2].punti += 3;
            classifica[s2].vittorie += 1;
            classifica[s1].sconfitte += 1;
        } 
        else {
            classifica[s1].punti += 1;
            classifica[s2].punti += 1;
            classifica[s1].pareggi += 1;
            classifica[s2].pareggi += 1;
        }

    });

    mostraClassifica(classifica);
}

function mostraClassifica(classifica) {

    let array = Object.entries(classifica);

    array.sort((a, b) => b[1].punti - a[1].punti);

    const tabella = document.getElementById("tabellaClassifica");

    tabella.innerHTML = `
        <tr>
            <th>Posizione</th>
            <th>Squadra</th>
            <th>Punti</th>
            <th>Vittorie</th>
            <th>Pareggi</th>
            <th>Sconfitte</th>
        </tr>
    `;

    array.forEach(([nome, dati], index) => {
        tabella.innerHTML += `
            <tr>
                <td>${index + 1}</td>
                <td>${nome}</td>
                <td>${dati.punti}</td>
                <td>${dati.vittorie}</td>
                <td>${dati.pareggi}</td>
                <td>${dati.sconfitte}</td>
            </tr>
        `;
    });
}

calcolaClassifica();
</script>

</body>
</html>
